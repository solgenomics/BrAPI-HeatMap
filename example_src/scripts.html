<script src="leaflet.js"></script>
<script src="d3.js"></script>
<script src="turf.js"></script>
<script src="BrAPI.js"></script>
<script src="BrAPIHeatMap.js" charset="utf-8"></script>
<script type="text/javascript">
// 4015 plots,positions
// 3443 plots,positions,smaller,duplicated
// 1828
// 1649
// 2812
// 1953 plants
    d3.select("#build-heatmap-submit").on("click",()=>{
        d3.event.stopPropagation()
        d3.select("#map").html("");
        d3.select("#map_controls").html("");
        var myHeatMap = new BrAPIHeatMap("#map","#map_controls",
            d3.select('[name="endpoint"]').node().value,
            d3.select('[name="studyDbId"]').node().value,
            {
                defaultPos:[3.9021624,7.5051418],
                observationLevel:"plant",
                draw_controls:true,
                draw_control_trait:true,
                draw_control_unit:true,
                draw_control_rep:true,
                draw_control_block:true,
        });
        // L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{
        //     attribution: '&copy; <a href="http://www.esri.com/">Esri</a>, DigitalGlobe, GeoEye, i-cubed, USDA FSA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community',
        //     maxZoom: 23,
        //     maxNativeZoom: 19
        // }).addTo(myHeatMap.map);
        return false;
    });
</script>
